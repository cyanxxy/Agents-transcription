# render.yaml
services:
  - type: web # Specifies this is a web service
    name: exact-transcriber # Choose a name for your service (same as in Render UI)
    env: python # Specifies the runtime environment
    plan: free # Specifies the instance type
    runtime: python3
    buildCommand: >
      pip install --upgrade pip &&
      pip install -r requirements.txt --no-cache-dir
    startCommand: "streamlit run main.py --server.port $PORT --server.address 0.0.0.0 --server.headless true"
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.11
      # Required for Streamlit to work correctly
      - key: STREAMLIT_SERVER_ENABLE_CORS
        value: "false"
      - key: STREAMLIT_SERVER_HEADLESS
        value: "true"
      - key: STREAMLIT_SERVER_ADDRESS
        value: "0.0.0.0"
    healthCheckPath: "/_stcore/health"
    buildFilter:
      paths:
        - .render-packages.txt
        - .render-buildpacks.txt
        - Aptfile
        - requirements.txt
        - runtime.txt
        - main.py
        - "*.py"
        - Procfile
